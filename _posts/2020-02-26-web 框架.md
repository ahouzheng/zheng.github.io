---
title: web 框架
auther: ahou
layout: post
---

## Nginx

#### Nginx负载均衡
- 根据权重确定随机选中概率
- IP hash，根据IP的Hash值对应到服务器，保证同一个IP总能由同一个服务器提供服务，可以解决session共享问题
- url hash，根据url的Hash值对应到服务器，同一个地址访问总由同一个服务器响应，缓存效率更高

## Dubbo Dubbox

#### Dubbo负载均衡
- Random，权重随机，根据权重确定随机选中概率
- RoundRobin，轮询
- LeastActive，最少活跃调用，请求优先分配给活跃数小的服务提供者。刚开始每台提供者的活跃数都为0，每收到一个请求，活跃数加1。最小的活跃数有多个提供者时，根据权重确定选择谁。
- ConsistentHash，一致性hash，相同参数的请求总是发到同一个提供者，缺省只对第一个参数hash

#### Dubbo与Spring Cloud 比较
- dubbo 传输远快于springcloud  
- dubbo服务提供方与调用方接口依赖方式太强：我们为每个微服务定义了各自的service抽象接口，并通过持续集成发布到私有仓库中，调用方应用对微服务提供的抽象接口存在强依赖关系
springcloud REST调用方式相比RPC更为轻量化，服务提供方和调用方的依赖只是依靠一纸契约，不存在代码级别的强依赖。