---
title: 面试记录
auther: ahou
layout: post
---

## 2020-3-13 腾讯实习  PCG平台与内容事业群  一面 通过 第二天转为复试状态
时间：50分钟
- 自我介绍
- 询问了参加的竞赛情况
- 讲一讲HashMap，HashMap中的hash做法，是基于对象的hashcode还是自己实现
回答的很差，没有细心看源码
- HashMap一些默认值，链表转换为红黑树的阈值
- HashMap非线程安全，怎么实现线程安全
讲了Collections.synchronizedMap的线程安全实现方式(名字说错了，实现方式讲的没问题)，接下来讲了ConcurrentHashMap
- ConcurrentHashMap的segment加锁，在读和写都加锁吗
同一个segment允许同时读，但写时不允许读
- Java中实现可见性
final volatile synchronized
- 分别讲讲它们
- **volatile能保证数组中元素的可见性吗**
不能保证元素的可见性，只能保证数组这个引用的可见性
- synchronized底层实现
在同步块前加monitorenter，同步块后加monitorexit，实现锁
- 每一个synchronized都会加吗
不一定，讲了锁的消除和锁的粗化
- 用dubbo来实现什么功能
rpc框架，实现微服务等
- 使用dubbo跟直接使用http有什么差别
dubbo可以加入负载均衡，功能更灵活
- http进行数据传输时，比如传数组，怎么实现一个数据的压缩
这个问题面试官引导了很多，比如整形怎么压缩（将数据转化为符合条件的对应的长度，比如6不需要存储在long中，可以转化为short或Byte，还有存储一个基准值，其他用跟基准值的差来代替，数据比较集中的话，差值可以采用更短的数据类型），String数组怎么压缩（前缀树）
- MySQL索引
这里讲了聚集索引,在索引上Innodb和MyISAM的差别
- MySQL的索引是通过B+树实现的，在磁盘上怎么存储的
页
- 使用页会有一些分裂的操作
对，提到设置主键时一般自增，这样插入时可以减少分裂，效率更高




**算法相关的问题：**
- 怎么检测链表中有环
- 给一个无序链表，找到其中最长的连续段长度，比如打乱的1,2,3,4,8最长连续段是1,2,3,4，长度为4，要求O（n）时间复杂度
遍历，假设当前值为a，查找在HashMap中是否存在a+1的键，是否存在a-1的键  
只有a+1键，添加键值对(a, 1)  
只有a-1键，添加键值对(a, -1)  
都有，添加键值对(a, 0)  
都没有，添加键值对(a, 2)  

操作完毕相当于把值通过HashMap连接起来了  
然后遍历HashMap，顺着连接查找值，记录最长连续的段
**这个想法是错误的。。。。。。。。** 假设数组为5,3,1,4,2
map中对应值2,2,2,0,0  查找发现这个链是断的

**正确做法是**
遍历，直接将值保存到hashmap中，遍历hashmap，向前向后找，记录最长连续段
